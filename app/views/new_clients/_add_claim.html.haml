:javascript
  $('table.insurances').dataTable({
    "bPaginate": false,
    "bJQueryUI": true
  });

  function disable_submit_button(){
    if($('#policy_selector').val() == "" || $('#death_event_selector').val() == ""){
      $("form.add_claim input#submit").attr('disabled', true);
    }
    else{
      $("form.add_claim input#submit").attr('disabled', false);
    }
  }

  $(document).ready(function() {
    $("form.add_claim select").change(function(){
      disable_submit_button();
    });
  });


%h1 Add claim
= form(:action => url(:controller => :new_clients, :action => :death_claim_insurance), :method => :get, :class =>"add_claim") do
  %table
    %tr
      %td
        Select Insurance Policy:
        = select :name => "simple_insurance_policy", :collection => @client.simple_insurance_policies.map{|x| [x.id, x.insured_type]}, :class => "ploicy_selector"
      %td
        Select Death Event:
        = select :name => "death_event_id", :collection => @client.death_events.map{|x| [x.id, x.deceased_name]}, :class => "death_event_selector"
      %td
        = submit "Add claim", :disabled => true

%h1 Recently Insurace claims
- client_insurance_claims = @client.death_events.insurance_claims.reverse
- unless client_insurance_claims.blank?
  %table.report.weeksheet.nojs.insurances
    %thead
      %tr
        %th Claim unique id
        %th Filed on date
        %th Claim status
        %th Accounted at
        %th Performed by
    %tbody
      - client_insurance_claims.each do |claim|
        %tr
          %td
            = claim.claim_unique_id
          %td
            = claim.filed_on
          %td
            = claim.claim_status.humanize rescue nil
          %td
            = claim.accounted_at
          %td
            = StaffMember.get(claim.performed_by).name
- else
  No insurance claim found