%table{:width => '100%'}
  %tr
    - if @cost_center
      - ledgers = @cost_center.get_ledgers(get_effective_date)
      - ledgers_by_type = ledgers.group_by {|l| l.account_type}
    - else
      - ledgers
    - for account_type in Constants::Accounting::ACCOUNT_TYPES
      - ledgers = ledgers_by_type[account_type] if ledgers_by_type
      %td
        %table.tall
          %tr
            %th{:style => "text-align: left;"}
              %h1
                = account_type.to_s.humanize
          - if ledgers
            - ledgers.each do |ledger|
              %tr
                %td
                  = link_to_with_rights "#{ledger.name}", resource(ledger, :cost_center_id => @cost_center.id)
          - else
            %tr
              %td
                = "No ledgers for #{account_type}"