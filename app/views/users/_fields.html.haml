%table.form#user_form
  %tr
    %td
      Login name:
    %td
      - if @user.new?
        = text_field :login
        %br/
        %span.greytext (only letters and numbers are allowed)
      - else
        = @user.name
  - if params[:action] == 'edit'
    %tr
      %td
        Staff member
      %td
        = @user.staff_member.name unless @user.staff_member.blank?
  - else
    %tr.staff_member
      %td
        Staff Member
      %td
        = select :name => 'staff_member', :collection => StaffMember.none_user_staff_members.map{|s| [s.id.to_s, s.name]}, :selected => (@user.staff_member ? @user.staff_member.id.to_s : ""), :class => "chosen"
        = link_to "Add Staff Member", resource(:staff_members, :new)

  %tr.funder
    %td
      Is a funder
    %td
      = select :funder, :collection => [["","---"]] + Funder.all(:order => [:name]).map{|s| [s.id.to_s, s.name]}, :selected => (@user.funder ? @user.funder.id.to_s : "")
  %tr
    %td
      Preferred Locale
    %td
      = select :preferred_locale, :collection => [["","---"]] + LOCALES.map{|s| [s[0].to_s, s[1].to_s]}, :selected => (@user.preferred_locale ? @user.preferred_locale : "")
  - if @user.new?
    %tr
      %td
        Password:
      %td
        = password_field :password
    %tr
      %td
        Password confirmation:
      %td
        = password_field :password_confirmation

  %tr
    %td
      Active ?
    %td
      = check_box :active
